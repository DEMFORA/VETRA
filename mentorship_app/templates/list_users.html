<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KullanÄ±cÄ± Listesi</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&family=Poppins:wght@600&display=swap" rel="stylesheet">

</head>
<body>
    <h1>KullanÄ±cÄ± Listesi</h1>

    <!-- ğŸ”¹ MENTÃ–RLER -->
    <h2>MentÃ¶rler</h2>
    {% if users|selectattr('role', 'equalto', 'mentor')|list %}
    <ul>
        {% for user in users if user.role == 'mentor' %}
        <li class="user-card">
            <!-- KullanÄ±cÄ±nÄ±n bilgileri -->
            <strong>ID:</strong> {{ user.id }}<br>
            <strong>Ad:</strong> {{ user.first_name }}<br>
            <strong>Soyad:</strong> {{ user.last_name }}<br>
            <strong>Email:</strong> {{ user.email }}<br>
            <strong>Meslek:</strong> {{ user.occupation }}<br>
            <strong>MentÃ¶rlÃ¼k AlanÄ±:</strong> {{ user.skills }}<br>

            <!-- Silme ve GÃ¼ncelleme butonlarÄ± -->
            <button onclick="deleteUser({{ user.id }})">Sil</button>
            <a href="/edit-user/{{ user.id }}"><button>GÃ¼ncelle</button></a>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>HenÃ¼z kayÄ±tlÄ± mentÃ¶r bulunmamaktadÄ±r.</p>
    {% endif %}

    <!-- ğŸ”¸ MENTEELER -->
    <h2>Menteeler</h2>
    {% if users|selectattr('role', 'equalto', 'mentee')|list %}
    <ul>
        {% for user in users if user.role == 'mentee' %}
        <li class="user-card">
            <!-- KullanÄ±cÄ±nÄ±n bilgileri -->
            <strong>ID:</strong> {{ user.id }}<br>
            <strong>Ad:</strong> {{ user.first_name }}<br>
            <strong>Soyad:</strong> {{ user.last_name }}<br>
            <strong>Email:</strong> {{ user.email }}<br>
            <strong>Meslek:</strong> {{ user.occupation }}<br>
            <strong>Deneyim Almak Ä°stediÄŸi Alan:</strong> {{ user.skills }}<br>

            <!-- Silme ve GÃ¼ncelleme butonlarÄ± -->
            <button onclick="deleteUser({{ user.id }})">Sil</button>
            <a href="/edit-user/{{ user.id }}"><button>GÃ¼ncelle</button></a>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>HenÃ¼z kayÄ±tlÄ± mentee bulunmamaktadÄ±r.</p>
    {% endif %}

    <!-- ğŸ”— Sayfa GeÃ§iÅŸleri -->
    <p style="text-align: center; margin-top: 20px;">
        <a href="/">Anasayfa</a> | <a href="/add-user-form">Yeni KullanÄ±cÄ± Ekle</a>
    </p>

    <!-- âŒ KullanÄ±cÄ± Silme Ä°ÅŸlemi -->
    <script>
    function deleteUser(userId) {
        fetch(`/users/${userId}`, {
            method: 'DELETE'
        })
        .then(response => response.json())
        .then(data => {
            alert(data.message); // Silme mesajÄ±nÄ± gÃ¶ster
            window.location.reload(); // SayfayÄ± yenile
        })
        .catch(err => console.error(err));
    }
    </script>
</body>
</html>
